<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Composite Build POC - ECMonorepo</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <style>
    .terminal {
      background: #0d0d14;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      margin: 20px 0;
    }
    .terminal-header {
      background: var(--surface);
      padding: 10px 16px;
      display: flex;
      align-items: center;
      gap: 8px;
      border-bottom: 1px solid var(--border);
    }
    .terminal-dot {
      width: 10px; height: 10px; border-radius: 50%;
    }
    .terminal-dot-red { background: #f87171; }
    .terminal-dot-yellow { background: #fbbf24; }
    .terminal-dot-green { background: #34d399; }
    .terminal-title {
      font-family: 'JetBrains Mono', monospace;
      font-size: 12px;
      color: var(--text-muted);
      margin-left: 8px;
    }
    .terminal-body {
      padding: 20px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      line-height: 1.7;
      overflow-x: auto;
      color: var(--text-muted);
    }
    .term-prompt { color: var(--green); }
    .term-cmd { color: var(--text); }
    .term-success { color: var(--green); }
    .term-error { color: var(--red); }
    .term-warn { color: var(--yellow); }
    .term-info { color: var(--accent-light); }
    .term-dim { color: #4a4a60; }

    .arch-diagram {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      padding: 40px 20px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      margin: 32px 0;
    }
    .arch-box {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 16px 24px;
      text-align: center;
      min-width: 180px;
    }
    .arch-box-title {
      font-weight: 700;
      font-size: 15px;
      margin-bottom: 6px;
    }
    .arch-box-sub {
      font-size: 12px;
      color: var(--text-muted);
      font-family: 'JetBrains Mono', monospace;
    }
    .arch-box-producer { border-color: var(--accent); }
    .arch-box-consumer { border-color: var(--green); }
    .arch-connector {
      font-size: 28px;
      color: var(--text-muted);
    }
    .arch-targets {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-top: 8px;
    }
    .arch-target {
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      color: var(--accent-light);
      background: var(--accent-glow);
      padding: 2px 8px;
      border-radius: 4px;
    }

    .use-case {
      margin-bottom: 48px;
    }
    .use-case-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 16px;
    }
    .use-case-badge {
      font-size: 12px;
      font-weight: 700;
      padding: 4px 14px;
      border-radius: 12px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    .badge-pass {
      color: var(--green);
      background: rgba(52, 211, 153, 0.1);
      border: 1px solid rgba(52, 211, 153, 0.2);
    }
    .badge-fail {
      color: var(--red);
      background: rgba(248, 113, 113, 0.1);
      border: 1px solid rgba(248, 113, 113, 0.2);
    }

    .tooling-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 32px;
    }
    .tool-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 28px;
    }
    .tool-card h4 {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 8px;
    }
    .tool-card p {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 16px;
      line-height: 1.6;
    }

    .ci-badges {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
      margin: 24px 0;
    }
    .ci-badge-link {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 20px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      text-decoration: none;
      transition: all 0.2s;
    }
    .ci-badge-link:hover {
      border-color: var(--accent);
      text-decoration: none;
      transform: translateY(-2px);
    }
    .ci-badge-dot {
      width: 10px; height: 10px;
      border-radius: 50%;
    }
    .ci-badge-dot-green { background: var(--green); }
    .ci-badge-dot-red { background: var(--red); }
    .ci-badge-text {
      font-size: 14px;
      font-weight: 600;
      color: var(--text);
    }

    .file-list {
      margin: 20px 0;
    }
    .file-list table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }
    .file-list th {
      text-align: left;
      padding: 12px 16px;
      border-bottom: 2px solid var(--border);
      color: var(--text-muted);
      font-weight: 600;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    .file-list td {
      padding: 10px 16px;
      border-bottom: 1px solid var(--border);
    }
    .file-list td:first-child {
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      color: var(--accent-light);
    }
    .file-list tr:hover { background: var(--accent-glow); }

    .tag-new {
      font-size: 11px;
      font-weight: 600;
      color: var(--green);
      background: rgba(52, 211, 153, 0.1);
      padding: 2px 8px;
      border-radius: 4px;
    }
    .tag-modified {
      font-size: 11px;
      font-weight: 600;
      color: var(--yellow);
      background: rgba(251, 191, 36, 0.1);
      padding: 2px 8px;
      border-radius: 4px;
    }

    .summary-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin: 32px 0;
    }
    .summary-stat {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 24px;
      text-align: center;
    }
    .summary-stat-value {
      font-size: 36px;
      font-weight: 800;
      color: var(--accent-light);
      margin-bottom: 4px;
    }
    .summary-stat-label {
      font-size: 13px;
      color: var(--text-muted);
      font-weight: 500;
    }

    @media (max-width: 768px) {
      .arch-diagram { flex-direction: column; }
      .arch-connector { transform: rotate(90deg); }
      .tooling-grid { grid-template-columns: 1fr; }
      .ci-badges { flex-direction: column; }
    }
  </style>
</head>
<body>

<!-- Navigation -->
<nav class="nav">
  <div class="nav-inner">
    <a href="index.html" class="nav-logo">
      <span class="logo-icon">&#9671;</span> ECMonorepo
    </a>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="index.html#architecture">Architecture</a>
      <a href="dependency-graph.html">Graph</a>
      <a href="#" class="nav-github" style="color: var(--accent-light);">Composite Build</a>
    </div>
  </div>
</nav>

<!-- Hero -->
<section class="hero">
  <div class="hero-bg"></div>
  <div class="container hero-content">
    <div class="hero-badge">Proof of Concept</div>
    <h1>Composite Build<br><span class="gradient-text">Breaking Change Detection</span></h1>
    <p class="hero-sub">
      Cross-repository composite builds with Bazel Bzlmod, Gazelle BUILD generation,
      and bazel-diff target determination &mdash; catching breaking API changes at compile time.
    </p>
    <div class="hero-actions">
      <a href="#use-cases" class="btn btn-primary">See Results</a>
      <a href="#tooling" class="btn btn-secondary">Tooling</a>
    </div>
  </div>
</section>

<!-- Overview -->
<section class="section section-dark" id="overview">
  <div class="container">
    <div class="section-header">
      <h2>What This Proves</h2>
      <p>End-to-end validation of the Eventual Consistent Monorepo pattern.</p>
    </div>

    <div class="summary-grid">
      <div class="summary-stat">
        <div class="summary-stat-value">2</div>
        <div class="summary-stat-label">Repos Composed</div>
      </div>
      <div class="summary-stat">
        <div class="summary-stat-value">53</div>
        <div class="summary-stat-label">Impacted Targets Detected</div>
      </div>
      <div class="summary-stat">
        <div class="summary-stat-value">3</div>
        <div class="summary-stat-label">Test Targets Affected</div>
      </div>
      <div class="summary-stat">
        <div class="summary-stat-value">0s</div>
        <div class="summary-stat-label">Time to Detect Break</div>
      </div>
    </div>

    <div class="advantages-list">
      <div class="advantage-item visible">
        <div class="advantage-number">01</div>
        <div class="advantage-content">
          <h3>Cross-Repo Source Composition</h3>
          <p>Producer repo (<code>bazel-monorepo</code>) exposes a <code>java_library</code> via Bzlmod. Consumer repo (<code>ecmonorepo</code>) depends on it using <code>@composite-monorepo//library</code>. Both repos build from source &mdash; no published artifacts.</p>
        </div>
      </div>
      <div class="advantage-item visible">
        <div class="advantage-number">02</div>
        <div class="advantage-content">
          <h3>Compile-Time Break Detection</h3>
          <p>When the producer changes <code>findById(Long)</code> to <code>findById(String)</code>, the consumer fails to compile. The breaking change is caught immediately &mdash; no runtime surprises.</p>
        </div>
      </div>
      <div class="advantage-item visible">
        <div class="advantage-number">03</div>
        <div class="advantage-content">
          <h3>Gazelle BUILD Generation</h3>
          <p>Gazelle auto-generates BUILD files for both repos, with cross-repo <code>resolve</code> directives mapping <code>com.example.library</code> to <code>@composite-monorepo//library</code>.</p>
        </div>
      </div>
      <div class="advantage-item visible">
        <div class="advantage-number">04</div>
        <div class="advantage-content">
          <h3>bazel-diff Target Determination</h3>
          <p>Using <code>--fineGrainedHashExternalRepos=@composite-monorepo</code>, bazel-diff detects exactly which targets are affected by producer changes, enabling selective testing at scale.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Architecture -->
<section class="section" id="architecture">
  <div class="container">
    <div class="section-header">
      <h2>Architecture</h2>
      <p>Two repos wired together via Bzlmod <code>local_path_override</code>.</p>
    </div>

    <div class="arch-diagram">
      <div class="arch-box arch-box-producer">
        <div class="arch-box-title">bazel-monorepo</div>
        <div class="arch-box-sub">Producer</div>
        <div class="arch-targets">
          <span class="arch-target">//library:library</span>
          <span class="arch-target">//low-level-1:low-level-1</span>
        </div>
      </div>
      <div class="arch-connector">&rarr;</div>
      <div style="text-align: center;">
        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Bzlmod</div>
        <div style="font-family: 'JetBrains Mono', monospace; font-size: 11px; color: var(--accent-light);">local_path_override</div>
      </div>
      <div class="arch-connector">&rarr;</div>
      <div class="arch-box arch-box-consumer">
        <div class="arch-box-title">ecmonorepo</div>
        <div class="arch-box-sub">Consumer</div>
        <div class="arch-targets">
          <span class="arch-target">//consumer:consumer</span>
          <span class="arch-target">//consumer:consumer-tests</span>
          <span class="arch-target">//:app</span>
        </div>
      </div>
    </div>

    <div class="code-block">
<pre><code><span class="code-comment"># ecmonorepo/MODULE.bazel</span>
<span class="code-key">module</span>(name = <span class="code-str">"ecmonorepo"</span>, version = <span class="code-str">"1.0.0"</span>)

<span class="code-key">bazel_dep</span>(name = <span class="code-str">"composite-monorepo"</span>, version = <span class="code-str">"1.0.0"</span>)
<span class="code-key">local_path_override</span>(
    module_name = <span class="code-str">"composite-monorepo"</span>,
    path = <span class="code-str">"../bazel-monorepo"</span>,
)

<span class="code-comment"># Consumer depends on producer library</span>
<span class="code-comment"># deps = ["@composite-monorepo//library"]</span></code></pre>
    </div>
  </div>
</section>

<!-- Use Cases -->
<section class="section section-dark" id="use-cases">
  <div class="container">
    <div class="section-header">
      <h2>Use Cases</h2>
      <p>Two scenarios that prove the composite build pattern works end-to-end.</p>
    </div>

    <!-- Happy Path -->
    <div class="use-case">
      <div class="use-case-header">
        <span class="use-case-badge badge-pass">Pass</span>
        <h3>Happy Path &mdash; Consumer Tests Pass</h3>
      </div>
      <p style="color: var(--text-muted); font-size: 15px; margin-bottom: 16px;">
        Consumer tests run against the unmodified producer library. All tests pass, verifying the cross-repo dependency graph works correctly.
      </p>

      <div class="terminal">
        <div class="terminal-header">
          <span class="terminal-dot terminal-dot-red"></span>
          <span class="terminal-dot terminal-dot-yellow"></span>
          <span class="terminal-dot terminal-dot-green"></span>
          <span class="terminal-title">bazel test //consumer:all</span>
        </div>
        <div class="terminal-body">
<span class="term-prompt">$</span> <span class="term-cmd">bazel test //consumer:all --test_output=all</span>

<span class="term-dim">INFO: Analyzed 2 targets (0 packages loaded, 0 targets configured).</span>
<span class="term-dim">INFO: Found 2 test targets...</span>

<span class="term-success">PASSED</span> //consumer:src/test/java/com/example/consumer/ApiContractTest
<span class="term-success">PASSED</span> //consumer:src/test/java/com/example/consumer/UserServiceIntegrationTest

<span class="term-dim">INFO: Build completed successfully, 2 total actions</span>
<span class="term-success">//consumer:consumer-tests    PASSED in 1.2s</span>
  2 tests pass

<span class="term-prompt">$</span> <span class="term-cmd">bazel query 'rdeps(//..., @composite-monorepo//library)'</span>

<span class="term-info">//consumer:consumer</span>
<span class="term-info">//consumer:consumer-tests</span>
<span class="term-info">//consumer:app</span>
<span class="term-info">//library:library</span>     <span class="term-dim"># alias to @composite-monorepo//library</span>
<span class="term-info">//:app</span>

<span class="term-prompt">$</span> <span class="term-cmd">bazel query 'kind("test", rdeps(//..., @composite-monorepo//library))'</span>

<span class="term-info">//consumer:src/test/java/com/example/consumer/ApiContractTest</span>
<span class="term-info">//consumer:src/test/java/com/example/consumer/UserServiceIntegrationTest</span>
        </div>
      </div>
    </div>

    <!-- Breaking Change -->
    <div class="use-case">
      <div class="use-case-header">
        <span class="use-case-badge badge-fail">Detected</span>
        <h3>Breaking Change &mdash; Caught at Compile Time</h3>
      </div>
      <p style="color: var(--text-muted); font-size: 15px; margin-bottom: 16px;">
        The producer changes <code>findById(Long userId)</code> to <code>findById(String userId)</code>.
        The consumer, which passes a <code>Long</code> argument, fails to compile immediately.
      </p>

      <div class="terminal">
        <div class="terminal-header">
          <span class="terminal-dot terminal-dot-red"></span>
          <span class="terminal-dot terminal-dot-yellow"></span>
          <span class="terminal-dot terminal-dot-green"></span>
          <span class="terminal-title">Breaking Change Detection</span>
        </div>
        <div class="terminal-body">
<span class="term-prompt">$</span> <span class="term-cmd">sed -i 's/findById(Long userId)/findById(String userId)/' \</span>
<span class="term-cmd">  ../bazel-monorepo/library/src/main/java/com/example/library/UserService.java</span>

<span class="term-warn">=== Applying breaking change: findById(Long) &rarr; findById(String) ===</span>

<span class="term-prompt">$</span> <span class="term-cmd">bazel test //consumer:all --test_output=errors</span>

<span class="term-error">ERROR: Build failed.</span>
<span class="term-error">consumer/src/test/java/com/example/consumer/UserServiceIntegrationTest.java:15:</span>
<span class="term-error">  error: incompatible types: long cannot be converted to String</span>
<span class="term-error">        User user = service.findById(1L);</span>
<span class="term-error">                                      ^</span>

<span class="term-error">consumer/src/test/java/com/example/consumer/ApiContractTest.java:22:</span>
<span class="term-error">  error: incompatible types: long cannot be converted to String</span>
<span class="term-error">        User user = service.findById(1L);</span>
<span class="term-error">                                      ^</span>

<span class="term-success">=== SUCCESS: Breaking change detected at compile time ===</span>
<span class="term-success">The composite build correctly caught the incompatible API change.</span>
        </div>
      </div>

      <div class="terminal">
        <div class="terminal-header">
          <span class="terminal-dot terminal-dot-red"></span>
          <span class="terminal-dot terminal-dot-yellow"></span>
          <span class="terminal-dot terminal-dot-green"></span>
          <span class="terminal-title">bazel-diff: Impacted Targets</span>
        </div>
        <div class="terminal-body">
<span class="term-prompt">$</span> <span class="term-cmd">bazel-diff generate-hashes -w $(pwd) -b /opt/homebrew/bin/bazel \</span>
<span class="term-cmd">  --fineGrainedHashExternalRepos=@composite-monorepo,@maven \</span>
<span class="term-cmd">  changed-hashes.json</span>

<span class="term-prompt">$</span> <span class="term-cmd">bazel-diff get-impacted-targets \</span>
<span class="term-cmd">  -sh baseline-hashes.json -fh changed-hashes.json \</span>
<span class="term-cmd">  -o impacted-targets.txt</span>

<span class="term-warn">=== Impacted test targets ===</span>
<span class="term-info">//consumer:src/test/java/com/example/consumer/ApiContractTest</span>
<span class="term-info">//consumer:src/test/java/com/example/consumer/UserServiceIntegrationTest</span>
<span class="term-info">@composite-monorepo//library:src/test/java/com/example/library/UserServiceTest</span>

<span class="term-dim">Total impacted targets: 53</span>
<span class="term-dim">Test targets: 3</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Tooling -->
<section class="section" id="tooling">
  <div class="container">
    <div class="section-header">
      <h2>Tooling</h2>
      <p>The three tools that make composite builds work at scale.</p>
    </div>

    <div class="tooling-grid">
      <div class="tool-card">
        <h4>Bzlmod</h4>
        <p>Bazel's native module system. <code>local_path_override</code> wires producer sources directly into the consumer's build graph without publishing artifacts.</p>
        <div class="code-block">
<pre><code><span class="code-comment"># MODULE.bazel</span>
<span class="code-key">bazel_dep</span>(name = <span class="code-str">"composite-monorepo"</span>,
          version = <span class="code-str">"1.0.0"</span>)
<span class="code-key">local_path_override</span>(
    module_name = <span class="code-str">"composite-monorepo"</span>,
    path = <span class="code-str">"../bazel-monorepo"</span>,
)</code></pre>
        </div>
      </div>

      <div class="tool-card">
        <h4>Gazelle</h4>
        <p>Auto-generates BUILD files from source. Cross-repo deps use <code>resolve</code> directives to map Java packages to external module targets.</p>
        <div class="code-block">
<pre><code><span class="code-comment"># Root BUILD</span>
<span class="code-comment"># gazelle:java_extension enabled</span>
<span class="code-comment"># gazelle:resolve java \</span>
<span class="code-comment">#   com.example.library \</span>
<span class="code-comment">#   @composite-monorepo//library</span>
<span class="code-comment"># gazelle:exclude src</span>

<span class="code-comment"># Subpackage BUILD</span>
<span class="code-comment"># gazelle:java_module_granularity module</span></code></pre>
        </div>
      </div>

      <div class="tool-card">
        <h4>bazel-diff</h4>
        <p>Hash-based target determination. With <code>fineGrainedHashExternalRepos</code>, it detects changes in external modules and maps them to impacted consumer targets.</p>
        <div class="code-block">
<pre><code><span class="term-prompt">$</span> bazel-diff generate-hashes \
  <span class="code-key">--fineGrainedHashExternalRepos</span>=\
  <span class="code-str">@composite-monorepo</span>,<span class="code-str">@maven</span> \
  hashes.json

<span class="code-comment"># Key: @ prefix required for Bzlmod repos</span></code></pre>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- CI -->
<section class="section section-dark" id="ci">
  <div class="container">
    <div class="section-header">
      <h2>CI Workflows</h2>
      <p>GitHub Actions runs both use cases on every push and PR.</p>
    </div>

    <div class="ci-badges">
      <a href="https://github.com/pravasna30-dev/ecmonorepo/actions/workflows/composite-build.yml" class="ci-badge-link" target="_blank">
        <span class="ci-badge-dot ci-badge-dot-green"></span>
        <span class="ci-badge-text">Happy Path &mdash; Consumer Tests Pass</span>
      </a>
      <a href="https://github.com/pravasna30-dev/ecmonorepo/actions/workflows/composite-build.yml" class="ci-badge-link" target="_blank">
        <span class="ci-badge-dot ci-badge-dot-red"></span>
        <span class="ci-badge-text">Breaking Change &mdash; Detected at Compile Time</span>
      </a>
    </div>

    <div class="code-block">
<pre><code><span class="code-comment"># .github/workflows/composite-build.yml</span>
<span class="code-key">name:</span> Composite Build POC

<span class="code-key">on:</span>
  <span class="code-key">push:</span>
    <span class="code-key">branches:</span> [main]
  <span class="code-key">pull_request:</span>
    <span class="code-key">branches:</span> [main]
  <span class="code-key">workflow_dispatch:</span>

<span class="code-key">jobs:</span>
  <span class="code-key">happy-path:</span>
    <span class="code-key">name:</span> <span class="code-str">"Happy Path - Consumer Tests Pass"</span>
    <span class="code-comment"># Checkout both repos, build //..., test //consumer:all</span>
    <span class="code-comment"># Show cross-repo dependency graph via bazel query</span>

  <span class="code-key">breaking-change:</span>
    <span class="code-key">name:</span> <span class="code-str">"Breaking Change - Detected at Compile Time"</span>
    <span class="code-comment"># Checkout both repos, verify happy path first</span>
    <span class="code-comment"># Apply breaking change: findById(Long) &rarr; findById(String)</span>
    <span class="code-comment"># Verify compile failure is caught</span></code></pre>
    </div>
  </div>
</section>

<!-- Files -->
<section class="section" id="files">
  <div class="container">
    <div class="section-header">
      <h2>Files Modified</h2>
      <p>All files created or modified to set up the composite build.</p>
    </div>

    <h3 style="font-size: 18px; margin-bottom: 16px;">bazel-monorepo (Producer)</h3>
    <div class="file-list">
      <table>
        <thead>
          <tr><th>File</th><th>Status</th><th>Purpose</th></tr>
        </thead>
        <tbody>
          <tr>
            <td>library/BUILD</td>
            <td><span class="tag-new">new</span></td>
            <td>java_library + java_test_suite for the library module</td>
          </tr>
          <tr>
            <td>library/src/.../User.java</td>
            <td><span class="tag-new">new</span></td>
            <td>User entity (id, email, name)</td>
          </tr>
          <tr>
            <td>library/src/.../UserService.java</td>
            <td><span class="tag-new">new</span></td>
            <td>Service with findById(Long), findAll(), createUser()</td>
          </tr>
          <tr>
            <td>library/src/.../UserServiceTest.java</td>
            <td><span class="tag-new">new</span></td>
            <td>JUnit 5 tests for UserService</td>
          </tr>
        </tbody>
      </table>
    </div>

    <h3 style="font-size: 18px; margin: 32px 0 16px;">ecmonorepo (Consumer)</h3>
    <div class="file-list">
      <table>
        <thead>
          <tr><th>File</th><th>Status</th><th>Purpose</th></tr>
        </thead>
        <tbody>
          <tr>
            <td>MODULE.bazel</td>
            <td><span class="tag-modified">modified</span></td>
            <td>Added maven deps, contrib_rules_jvm, rules_jvm_external</td>
          </tr>
          <tr>
            <td>BUILD</td>
            <td><span class="tag-modified">modified</span></td>
            <td>Gazelle config, resolve directives, exclude src</td>
          </tr>
          <tr>
            <td>library/BUILD</td>
            <td><span class="tag-modified">modified</span></td>
            <td>Changed to alias pointing at @composite-monorepo//library</td>
          </tr>
          <tr>
            <td>consumer/BUILD</td>
            <td><span class="tag-new">new</span></td>
            <td>java_library, java_binary, java_test_suite</td>
          </tr>
          <tr>
            <td>consumer/src/.../Application.java</td>
            <td><span class="tag-new">new</span></td>
            <td>Consumer app using the producer library</td>
          </tr>
          <tr>
            <td>consumer/src/.../ApiContractTest.java</td>
            <td><span class="tag-new">new</span></td>
            <td>Contract test for producer API shape</td>
          </tr>
          <tr>
            <td>consumer/src/.../UserServiceIntegrationTest.java</td>
            <td><span class="tag-new">new</span></td>
            <td>Integration test calling producer service</td>
          </tr>
          <tr>
            <td>.github/workflows/composite-build.yml</td>
            <td><span class="tag-new">new</span></td>
            <td>CI workflow with happy-path + breaking-change jobs</td>
          </tr>
          <tr>
            <td>docs/composite-build.html</td>
            <td><span class="tag-new">new</span></td>
            <td>This documentation page</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="footer">
  <div class="container">
    <div class="footer-inner">
      <div class="footer-brand">
        <span class="logo-icon">&#9671;</span> ECMonorepo
      </div>
      <div class="footer-links">
        <a href="index.html">Home</a>
        <a href="https://github.com/pravasna30-dev/ecmonorepo" target="_blank">GitHub</a>
        <a href="https://github.com/pravasna30-dev/ecmonorepo/actions/workflows/composite-build.yml" target="_blank">CI Runs</a>
      </div>
    </div>
    <p class="footer-note">Built with Bazel 9.0 &middot; Java 21 &middot; Bzlmod &middot; Gazelle &middot; bazel-diff</p>
  </div>
</footer>

<script>
// Nav background on scroll
const nav = document.querySelector('.nav');
window.addEventListener('scroll', () => {
  nav.classList.toggle('nav-scrolled', window.scrollY > 50);
});

// Smooth scroll
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function(e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  });
});

// Animate elements on scroll
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
    }
  });
}, { threshold: 0.1 });

document.querySelectorAll('.advantage-item, .tool-card, .summary-stat').forEach(el => {
  observer.observe(el);
});
</script>

</body>
</html>
